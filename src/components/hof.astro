---
import {data} from '../utils/read_csv.ts';
import EventRows from '@components/events.astro'

---

<style>
    .table-alternate tbody tr:nth-child(odd) {
        background-color: #f9f9f9; /* Light gray for odd rows */
    }
    .table-alternate tbody tr:nth-child(even) {
        background-color: #ffffff; /* White for even rows */
    }
</style>

<style>
    .table-hover tbody tr:hover {
        background-color: #e9e9e9; /* Slightly toned gray on hover */
    }
    .col-30 { 
        width: 30%; 
    }

.topic-col {
    max-width: 30%;
    word-wrap: break-word;
    white-space: normal;
}

</style>



<div class="mx-auto w-full lg:px-24 max-w-7xl md:px-12 items-center px-8 mb-12 scroll-mt-12">
  <!-- tables start -->
  <div class="relative overflow-x-auto">

  <div id="page-2023" class="table-content">
    <div class="mt-6 justify-center mb-16 flex flex-col sm:flex-row gap-3">
        <h2 class="text-4xl lg:text-5xl font-bold lg:tracking-tight">
          Past Events 2023
        </h2>
      </div> 
    <table  class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 table-hover">
        <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400">
            <tr>
                <th scope="col" class="px-6 py-3 topic-col">Topic</th>
                <th scope="col" class="px-6 py-3">Host</th>
                <th scope="col" class="px-6 py-3">Speakers</th>
                <th scope="col" class="px-6 py-3">Slides</th>
            </tr>
        </thead>
        <tbody>
            {
                data.map((Event) => (
                    <EventRows
                     Topic = {Event.Topic}
                     Host = {Event.Host}
                     Speakers = {Event.Speakers}
                     Slides = {Event.Slides} 
                     />
                ))
            }
           </tbody>
    </table>
</div>

  </div>
</div>
<!-- table end -->


<div class="flex justify-center space-x-2 mb-16">
    <button class="page-button" data-page="2023">2023</button>
    <button class="page-button" data-page="2022">2022</button>
    <button class="page-button" data-page="2021">2021</button>
    <button class="page-button" data-page="2020">2020</button>
    <button class="page-button" data-page="2019">2019</button>
    <button class="page-button" data-page="2018">2018</button>
    <button class="page-button" data-page="2017">2017</button>
    <button class="page-button" data-page="2016">2016</button>
    <button class="page-button" data-page="2015">2015</button>
    <!-- Add more buttons as needed -->
</div>

<script>
    function showPage(page: number): void {
      const tableContents: NodeListOf<HTMLElement> = document.querySelectorAll('.table-content');
      tableContents.forEach(table => {
        table.classList.add('hidden');
      });
    
      const selectedTable = document.getElementById(`page-${page}`);
      if (selectedTable) {
        selectedTable.classList.remove('hidden');
      }
    }
    
    // Adding event listeners to pagination buttons
    document.addEventListener('DOMContentLoaded', () => {
      const pageButtons = document.querySelectorAll('.page-button');
      pageButtons.forEach(button => {
        button.addEventListener('click', () => {
          const page = parseInt((button as HTMLElement).dataset.page as string, 10);
          showPage(page);
        });
      });
    });
</script>
    